<%- include('partials/navbar') %>
<svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320">
    <path fill="#ff5500" fill-opacity="1" d="M0,128L48,112C96,96,192,64,288,53.3C384,43,480,53,576,96C672,139,768,213,864,224C960,235,1056,181,1152,160C1248,139,1344,149,1392,154.7L1440,160L1440,0L1392,0C1344,0,1248,0,1152,0C1056,0,960,0,864,0C768,0,672,0,576,0C480,0,384,0,288,0C192,0,96,0,48,0L0,0Z"></path>
</svg>
<div class="container">
    <h1 class="mb-10">Results</h1>
    <div class="users mb-10">
        <h2 class="mb-4">Users</h2>
        <% if (users.length > 0) { %>
            <div class="card-deck">
                <% users.forEach((user) => { %>
                    <div class="card" style="width: 18rem;display: inline-block;">
                        <img class="card-img-top" src="<%= user.avatar %>" alt="Card image cap">
                        <div class="card-body">
                            <h5 class="card-title"><%= user.name %></h5>
                            <p class="card-text"><%= user.bio %></p>
                            <a href="/users/<%= user.slug %>" class="btn btn-primary">Profile</a>
                        </div>
                    </div>
                <% }) %>    
            </div>
        <% } else { %>
            <div class="text-center">
                <img src="../public/emojis/cricket.svg" alt="cricket" width="200" height="200" class="mx-auto mb-4">
                <h1>*Cricket noises*</h1>
                <br>
                <h3>Couldn't find a user with a name similar to <%= query %></h3>
            </div>
        <% } %>
    </div>
    <div class="posts">
        <h2 class="mb-4">Posts</h2>
        <% if (posts.length > 0) { %>
            <% posts.forEach(post => { %>
                <div class="card mt-4">
                    <div class="card-body">
                        <h4 class="card-title"><%= post.title %></h4>
                        <div class="card-subtitle text-muted mb-2">
                            <%= post.createdAt.toLocaleDateString() %>
                        </div>
                        <div class="card-text mb-2">
                            <%= post.description.substr(0, 50) %>...
                        </div>
                        <a href="/articles/<%= post.slug %>" class="btn btn-primary">Read more</a>
                        <% if (user && post.author === user.name) { %>
                            <a href="/articles/edit/<%= post.id %>" class="btn btn-info">Edit</a>
                            <form action="/articles/<%= post.id %>?_method=DELETE" method="POST" class="d-inline">
                                <button type="submit" class="btn btn-danger">Delete</button>
                            </form>
                        <% } %>
                    </div>
                </div>
            <% }) %>
        <% }else { %>
            <img src="../../public/emojis/cricket.svg" alt="cricket" width="200" height="200" class="mx-auto mb-4">
            <div class="text-center">
                <h1>*Cricket noises*</h1>
                <br>
                <h3>Couldn't find a post with a title similar to <%= query %></h3>
            </div>
        <% } %>
    </div>
</div>